---
sidebar_position: 1
title: 'Gunnicorn and Nginx'
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# ğŸš€ Deploying a Ecom on Ubuntu with Gunicorn and Nginx

This guide walks you through deploying a Flask Ecom using Gunicorn as a WSGI server and Nginx as a reverse proxy on an Ubuntu server.

---

## ğŸ§° Requirements

- Ubuntu 20.04 or 22.04 server
- Python 3 installed
- `sudo` privileges
- Public IP or domain (for Nginx access)
- First need the source code provided by **Python Vietnam** - [download now](https://pythonvn.com/ecom-python/)

---

## Step 1: ğŸ”§ Update Your System

```bash
sudo apt update && sudo apt upgrade -y
```

## Step 2: ğŸ Install Python, pip, and venv (if not installed)

```bash
sudo apt install python3 python3-pip python3-venv -y
```

## Step 3: ğŸ—ï¸ Create Project and Virtual Environment

```bash
mkdir ~/project_name
cd ~/project_name
python3 -m venv venv
source venv/bin/activate
```

## Step 4: ğŸ“¤ Upload code to server

**Move code to server using ssh**

- Ubuntu server is running, has SSH account (eg ubuntu@123.123.123.123)
- On the server there is a directory /home/ubuntu/flask_project
- Install Python, Flask, Gunicorn, Nginx on the server as instructed above

**ğŸ”‘ Test SSH server access**

```bash
ssh ubuntu@123.123.123.123
```

**If prompted for a password: type it in Or set up an SSH key for convenience (run once):**

```bash
ssh-keygen -t rsa -b 4096
ssh-copy-id ubuntu@123.123.123.123
```

<Tabs>
    <TabItem value="Window" label="Window" default>
        Use the application below to connect and upload the code to the server:

        - [WinSCP](https://winscp.net/eng/index.php)
        - [FileZilla](https://filezilla-project.org/)
    </TabItem>
    <TabItem value="Mac Os" label="Mac Os">
        **Upload using Scp:**

        ```bash
        scp -r ~/folder-local/*  user@<IP>:/project-folder
        ```

        - **folder-local:** Project folder path on your computer.
        - **project-folder:** Project folder path on server.

        **Upload using Rsync:**

        ```bash
        rsync -avz ~/folder-local/* user@<IP>:/project-folder
        ```

        - **folder-local:** Project folder path on your computer.
        - **project-folder:** Project folder path on server.
    </TabItem>
</Tabs>

**Directory Structure**

```bash
/home/<user>/<project_name>/
|â€“â€“ app
â”œâ”€â”€ wsgi.py
â”œâ”€â”€ venv/
|â€“â€“ requirements.txt
â””â”€â”€ config.py
```

## Step 5: ğŸ”¥ Install Requirements and Test App

**Install Requirements:**

```bash
pip install -r requirements.txt
```

**Test App:**

```bash
python wsgi.py
```

**The command line displayed as follows was successful.**

```shell
WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on http://127.0.0.1:5000
Press CTRL+C to quit
 * Restarting with stat
```

## Step 6: ğŸŒ Install and Configure Nginx

**Install Nginx:**

```bash
sudo apt install nginx -y
```

**Create a new config file:**

```bash
sudo nano /etc/nginx/sites-available/project_name
```

**Insert code:**

```bash
server {
    listen 80;
    server_name domain_name.com;  # Change this to your domain_name if you have one

    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

**Enable the site:**

```bash
sudo ln -s /etc/nginx/sites-available/flask_project /etc/nginx/sites-enabled
```

**sudo rm /etc/nginx/sites-enabled/default**

```bash
sudo rm /etc/nginx/sites-enabled/default
```

**Check and restart Nginx:**

```bash
sudo nginx -t
sudo systemctl restart nginx
```

## Step 7: âš™ï¸ Run Gunicorn as a systemd Service

**Create the service file:**

```bash
sudo nano /etc/systemd/system/flask_project.service
```

**Paste and adjust the paths and user accordingly:**

```bash
[Unit]
Description=Gunicorn instance to serve Project Name
After=network.target

[Service]
User=$USER
Group=$GROUP
WorkingDirectory=/home/user/project_folder # Path project folder
Environment="PATH=/home/user/project_folder/venv/bin" # Path project /bin
ExecStart=/home/user/project_folder/venv/bin/gunicorn --workers 3 --bind unix:project_name.sock -m 007 wsgi:app --access-logfile /home/user/project_folder/log/access.log --error-logfile /home/user/project_folder/log/error.log

[Install]
WantedBy=multi-user.target
```

**Note:**
- **/home/user:** User login ssh
- **/home/user/project_folder:** Main folder project

**Reload and enable:**

```bash
sudo systemctl daemon-reexec
sudo systemctl start project_name
sudo systemctl enable project_name
```

**Check status:**

```bash
sudo systemctl status flask_project
```

## ğŸ” (Optional) Enable HTTPS with Letâ€™s Encrypt

```bash
sudo apt install certbot python3-certbot-nginx -y
sudo certbot --nginx
```

Follow the prompts to get a free SSL certificate.

## âœ… Access Your App

Open your browser and go to:

```bash
https://your-domain.com
```